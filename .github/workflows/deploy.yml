name: Deploy React App to GitHub Pages


on:
 push:
   branches:
     - feature  // when you push code to this branch your deployment happens


permissions:
 contents: write


jobs:
 build-and-deploy:
   runs-on: ubuntu-latest


   steps:
     - name: â¬‡ï¸ Checkout code
       uses: actions/checkout@v4


     - name: âš™ï¸ Setup Node.js
       uses: actions/setup-node@v4
       with:
         node-version: 22


     - name: ğŸ“¦ Install dependencies
       run: npm install


     - name: ğŸ› ï¸ Build the app
       run: |
         VITE_API_URL=https://my-app-backend-cicd-2.onrender.com npm run build


     - name: ğŸš€ Deploy to GitHub Pages
       uses: peaceiris/actions-gh-pages@v4
       with:
         github_token: ${{ secrets.GITHUB_TOKEN }} // this will be automatically taken by github
         publish_dir: ./dist
