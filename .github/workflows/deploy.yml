name: Deploy React App to GitHub Pages


on:
 push:
   branches:
     - feature  


permissions:
 contents: write


jobs:
 build-and-deploy:
   runs-on: ubuntu-latest


   steps:
     - name: ⬇️ Checkout code
       uses: actions/checkout@v4


     - name: ⚙️ Setup Node.js
       uses: actions/setup-node@v4
       with:
         node-version: 22


     - name: 📦 Install dependencies
       run: npm install


     - name: 🛠️ Build the app
       run: |
         npm ci
         VITE_API_URL=https://my-app-backend-cicd-2.onrender.com npm run build


     - name: 🚀 Deploy to GitHub Pages
       uses: peaceiris/actions-gh-pages@v4
       with:
         github_token: ${{ secrets.GITHUB_TOKEN }} 
         publish_dir: ./dist
